### Note: the frr-srv6-usid-ubuntu22:latest image can be found on dockerhub at bmcdougall/frr-srv6-usid
###   docker pull bmcdougall/frr-srv6-usid

#        Topology
#
#         frr-2
#         /  \
#        /    \
#    frr-1 --- frr-3
#     |         |
#    pc-1      pc-2
#
#

name: 3-node

mgmt:
  network: frr_mgt_net
  ipv4_subnet: 172.20.1.0/24
  #ipv6_subnet: 2001:172:20:2::/80

topology:
  nodes:
    frr-1:
      kind: linux
      image: frr-srv6-usid-ubuntu22:latest
      binds:
        - config/frr-1/daemons:/etc/frr/daemons
        - config/frr-1/frr-1.conf:/etc/frr/frr.conf
      mgmt-ipv4: 172.20.1.101
      #mgmt-ipv6: 2001:172:20:2::101

    frr-2:
      kind: linux
      image: frr-srv6-usid-ubuntu22:latest
      binds:
        - config/frr-2/daemons:/etc/frr/daemons
        - config/frr-2/frr-2.conf:/etc/frr/frr.conf
      mgmt-ipv4: 172.20.2.102
      #mgmt-ipv6: 2001:172:20:2::102

    frr-3:
      kind: linux
      image: frr-srv6-usid-ubuntu22:latest
      binds:
        - config/frr-3/daemons:/etc/frr/daemons
        - config/frr-3/frr-3.conf:/etc/frr/frr.conf
      mgmt-ipv4: 172.20.2.103
      #mgmt-ipv6: 2001:172:20:2::103


    pc-1:
      kind: linux
      image: praqma/network-multitool:latest
      mgmt-ipv4: 172.20.2.111

    pc-2:
      kind: linux
      image: praqma/network-multitool:latest
      mgmt-ipv4: 172.20.2.112

  links:
    - endpoints: ["frr-1:eth1", "frr-2:eth1"]
    - endpoints: ["frr-1:eth2", "frr-3:eth2"]
    - endpoints: ["frr-1:eth3", "pc-1:eth1"]

    - endpoints: ["frr-2:eth2", "frr-3:eth1"]
    - endpoints: ["frr-3:eth2", "frr-5:eth1"]  
    - endpoints: ["frr-3:eth3", "pc-2:eth1"]
